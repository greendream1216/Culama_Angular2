<div id="page_content">
    <div id="page_content_inner">
        <div id="admineditcompanypage" class="main_page">
            <h2 id="user_h2_1" md-language>Edit Company</h2>

            <div class="user_content uk-width-large-5-10 " ng-controller="manageCustomersController as user">
                <div class="md-card" data-uk-grid-margin>
                    <div class="md-card-content">
                        <ul class="uk-tab" data-uk-tab="{connect:'#tabs_anim2', animation:'slide-horizontal'}">
                            <li class="uk-active"><a href="#">Details</a></li>
                            <li><a href="#">Users</a></li>
                            <li><a href="#">Message Setting</a></li>
                        </ul>
                        <ul id="tabs_anim2" class="uk-switcher uk-margin">
                            <li>
                                <div class="md-card-content">
                                    <form name="editCompanyForm" ng-submit="user.EditCompany()" id="editCompanyForm">
                                        <div class="uk-form-row">
                                            <div class="uk-grid">
                                                <div class="uk-width-medium-1-2">
                                                    <label id="lbl_company_customername" for="company_input_customername" md-language>Company Name</label>
                                                    <input class="md-input" type="text" id="company_input_customername" required md-language ng-model="user.editcompany.CustomerName" md-input />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-form-row">
                                            <div class="uk-grid">
                                                <div class="uk-width-medium-1-2">
                                                    <label id="lbl_company_prefix" for="company_input_prefix" md-language>Prefix<span class="req">*</span></label>
                                                    <input class="md-input" type="text" id="company_input_prefix" required md-language ng-model="user.editcompany.Prefix" md-input />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-form-row">
                                            <div class="uk-grid">
                                                <div class="uk-width-medium-1-2">
                                                    <label id="lbl_company_userprefix" for="company_input_userprefix" md-language>UserPrefix<span class="req">*</span></label>
                                                    <input class="md-input" type="text" id="company_input_userprefix" required md-language ng-model="user.editcompany.UserPrefix" md-input />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-form-row">
                                            <div class="uk-grid">
                                                <div class="uk-width-medium-1-2">
                                                    <label id="lbl_company_info" for="company_input_info" md-language>Info</label>
                                                    <textarea class="md-input" id="company_input_info" md-language ng-model="user.editcompany.Info" md-input />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-form-row">
                                            <div class="uk-grid">
                                                <div class="uk-width-medium-1-2">
                                                    <label id="lbl_company_url" for="company_input_url" md-language>URL</label>
                                                    <input class="md-input" type="text" id="company_input_url" md-language ng-model="user.editcompany.URL" md-input />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="uk-width-medium-1-1 mt-20">
                                            <button type="submit" class="md-btn md-btn-primary md-btn-wave-light" id="btn_user_savebtn" md-language>
                                                Save
                                            </button>
                                            <a id="btn_user_cancelbtn" md-language class="md-btn md-btn-danger md-btn-wave-light" ui-sref="restricted.managecompanies">Cancel</a>
                                        </div>
                                    </form>
                                </div>
                            </li>
                            <li>
                                <table datatable="ng" dt-options="user.dtuserOptions" dt-column-defs="user.dtuserColumnDefs" class="uk-table" cellspacing="0" width="100%">
                                    <thead>
                                        <tr>
                                            <th rowspan="2" id="th_cuser_uname" md-language>Name</th>
                                            <th colspan="6"></th>
                                        </tr>
                                        <tr>
                                            <th id="th_cuser_cname" md-language>Company Name</th>
                                            <th id="th_cuser_role" md-language>Role</th>
                                            <th id="th_cuser_username" md-language>Username</th>
                                            <th id="th_cuser_phone" md-language>Phone</th>
                                            <th id="th_cuser_isactive" md-language>IsActive</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="user in user.editcompanyUsers">
                                            <td>{{ user.FullIdentityName }}</td>
                                            <td>{{user.Customer.CustomerName}}</td>
                                            <td>{{user.UserGroupName}}</td>
                                            <td>{{user.UserName}}</td>
                                            <td>{{user.Phone}}</td>
                                            <td>{{user.IsActive}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </li>
                            <li>
                                <div class="md-card-content">
                                    <div class="uk-form-row">
                                        <input id="allowmsgtoall_checkbox" type="checkbox" ng-model="user.editcompany.IsAllowMsgAllToEveryone" icheck ng-change="user.saveCompany()" />
                                        <label id="lbl_allowmsgtoall_checkbox" for="allowmsgtoall_checkbox" md-language> Allow all users to send messages to everyone</label>
                                    </div>
                                    <div class="uk-form-row">
                                        <span>Check user to allow send messages to everyone</span>
                                        <div class="uk-grid uk-grid-divider" data-uk-grid-margin>
                                            <div class="uk-width-large uk-width-medium-1-2">
                                                <ul class="md-list md-list-addon">
                                                    <li ng-repeat="u in user.editcompanyUsers">
                                                        <div class="md-list-addon-element">
                                                            <input id="{{ u.UserId }}" class="user-check" type="checkbox" icheck ng-model="u.IsAllowMsgToEveryone" ng-change="user.saveCompanyUser(u)" />
                                                        </div>
                                                        <div class="md-list-content">
                                                            <span class="md-list-heading">{{ u.FullIdentityName }}</span>
                                                            <span class="uk-text-small uk-text-muted">{{u.Phone}}</span>
                                                        </div>
                                                        <div ng-if="!u.IsAllowMsgToEveryone">
                                                            <selectize id="message_input_users_{{ u.UserId }}" target="{{ u.UserId }}" config="user.selectize_users_config" options="user.getOtherCompanyUsers(u)" position="bottom" ng-model="u.UserMessages | myFilter"></selectize>
                                                        </div>
                                                    </li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

